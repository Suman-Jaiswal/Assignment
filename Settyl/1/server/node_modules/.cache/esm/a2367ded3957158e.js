let User,asyncHandler;_395‍.x([["getUsers",()=>getUsers],["createUser",()=>createUser],["updateUser",()=>updateUser],["deleteUser",()=>deleteUser]]);_395‍.w("../models/userModel.js",[["default",["User"],function(v){User=v}]]);_395‍.w("express-async-handler",[["default",["asyncHandler"],function(v){asyncHandler=v}]]);


//getUsers function to get all users
       const getUsers = asyncHandler(async (req, res) => {
    const users = await User.find({})
    res.json(users)
})
       const createUser = asyncHandler(async (req, res) => {
    const raw = req.body
    const user = await new User(raw)
    if(user) {
        user.save()
        res.json(user)
    }
    else throw Error('There is an error while creating user!')
})
       const updateUser = asyncHandler(async (req, res) => {
    const raw = req.body
    const {id} = req.params
    User.findByIdAndUpdate(id, raw, {new: true}, function(err, doc){
        if(err) res.json('Error while updating user data')
        else res.status(200).json(doc)
    })
    
})
       const deleteUser = asyncHandler(async (req, res) => {
    const {id} = req.params
    User.findByIdAndDelete(id, function(err, doc){
        if(err) throw Error('Error while updating user data')
        else res.status(200)
    })
    
})
